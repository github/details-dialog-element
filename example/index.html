<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- <script type="module" src="../dist/index.js"></script> -->
  <script type="module" src="https://unpkg.com/@github/details-dialog-element@latest"></script>
  <script type="text/javascript" src="https://unpkg.com/@github/include-fragment-element@latest"></script>
  <title>details-dialog-element demo</title>
  <link href="../src/index.css" rel="stylesheet">
  <link href="https://unpkg.com/primer@latest/build/build.css" rel="stylesheet">
  <style>
    .details-with-dialog[open] > summary {
      cursor: default;
    }

    .details-with-dialog[open] > summary:before {
      content: " ";
      background: rgba(0, 0, 0, 0.3);
      display: block;
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      bottom: 0;
      z-index: 1;
    }

    .mh-80 {
      max-height: 80vh;
    }

    .narrow {
      width: 400px;
    }

    .wide {
      width: 640px;
    }
  </style>
</head>
<body class="p-4">
  <details class="details-with-dialog">
    <summary>Bare</summary>
    <details-dialog aria-label="Dialog with no CSS">
      <p class="mr-6 pr-3">But you can click anywhere to dismiss without JS.</p>
      <button data-close-dialog type="button" autofocus>Close button only works with JS</button>
    </details-dialog>
  </details>

  <details class="details-reset details-with-dialog mt-4">
    <summary class="btn">Dialog</summary>
    <details-dialog class="details-dialog anim-fade-in fast wide" aria-label="Dialog">
      <div class="Box d-flex flex-column">
        <div class="Box-header">
          Title
        </div>
        <div class="Box-body overflow-auto">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
        <div class="Box-footer">
          <button type="button" class="btn btn-block" data-close-dialog>Close</button>
        </div>
      </div>
    </details-dialog>
  </details>

  <details class="details-reset details-with-dialog mt-4">
    <summary class="btn">Dialog with &lt;include-fragment&gt;</summary>
    <details-dialog class="Box details-dialog anim-fade-in fast narrow" src="./content.html" aria-label="Dialog with include-fragment">
      <div class="Box-body"><include-fragment>loading</include-fragment></div>
    </details-dialog>
  </details>

  <details class="details-reset details-with-dialog mt-4">
    <summary class="btn">Dialog with autofocus</summary>
    <details-dialog class="details-dialog anim-fade-in fast narrow" aria-label="Dialog with autofocus">
      <div class="Box d-flex flex-column">
        <div class="Box-header">
          Title
        </div>
        <div class="Box-body overflow-auto">
          <form>
            <label>
              This input gets reset on close.
              <input type="text" autofocus>
            </label>
          </form>
          Lorem ipsum dolor sit amet, <a href="#url">consectetur adipisicing elit</a>, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<form>
        </div>
        <div class="Box-footer">
          <button type="button" class="btn btn-block" autofocus data-close-dialog>Close</button>
        </div>
      </div>
    </details-dialog>
  </details>

  <button type="button" class="btn mt-4" onclick="document.querySelector('details').open = true">JS trigger: focus should return here</button>

  <div id="shadow">
  </div>

  <template id="shadow-template">
    <style>
      details {
        margin-top: 2em;
      }
      summary {
         padding: .5em;
         border: 1px solid;
         border-radius: .3em;
         display: inline-block;
      }
      details[open] summary:before {
        position: fixed;
        content: '';
        display: block;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        background: rgba(0, 0, 0, 0.3);
      }
      details-dialog {
        position: fixed;
        height: 50vh;
        top: 50%;
        margin-top: -25vh;
        width: 50vw;
        min-width: 20em;
        left: 50%;
        transform: translateX(-50%);
        background: #fff;
        border-radius: .5em;
        padding: 1em;
      }
    </style>
    <details>
      <summary>Dialog with Shadow DOM</summary>
      <details-dialog aria-label="Shadow dialog">
        <button type="button" data-close-dialog>Close</button>
        content
        <button type="button" data-close-dialog>Close</button>
      </details-dialog>
    </details>
  </template>

  <script>
    const shadow = document.getElementById('shadow')
    const template = document.getElementById('shadow-template')
    const root = shadow.attachShadow({mode: 'open'})
    root.append(template.content.cloneNode(true))
  </script>
</body>
</html>
